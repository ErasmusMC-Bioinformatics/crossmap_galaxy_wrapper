<tool id="crossmap" name="crossmap" version="0.1.8">
    <description>Convert genome coordinates or annotation files between genome assemblies</description>
    
    <requirements>
        <requirement type="package" version="0.1.8">crossmap</requirement>
    </requirements>
    
    <stdio></stdio>

    <command>
        CrossMap.py --help > $output
    </command>

    <inputs>
        <param format="interval,gff,gtf,vcf" name="input" type="data" label="Convert coordinates of" />
        <!--
        <param format="interval,gff,gtf,vcf" name="input" type="data" label="Convert coordinates of">
            <validator type="unspecified_build" />
            <validator type="dataset_metadata_in_file" filename="liftOver.loc" metadata_name="dbkey" metadata_column="0" message="Liftover mappings are currently not available for the specified build." />
        </param>
        <param name="to_dbkey" type="select" label="To">
            <options from_file="liftOver.loc">
                <column name="name" index="1"/>
                <column name="value" index="2"/>
                <column name="dbkey" index="0"/>
                <filter type="data_meta" ref="input" key="dbkey" column="0" />
            </options>
        </param>
        <param name="minMatch" size="10" type="float" value="0.95" label="Minimum ratio of bases that must remap" help="Recommended values: same species = 0.95, different species = 0.10" />
        <conditional name="multiple">
                <param name="choice" type="select" label="Allow multiple output regions?" help="Recommended values: same species = No, different species = Yes">
                        <option value="0" selected="true">No</option>
                        <option value="1">Yes</option>
                </param>
                <when value="0">
                        <param name="minSizeQ" type="hidden" value="0" />
                        <param name="minChainQ" type="hidden" value="0" />
                        <param name="minChainT" type="hidden" value="0" />
                </when>
                <when value="1">
                        <param name="minSizeQ" size="10" type="integer" value="0" label="Minimum matching region size in dataset" help="Recommended value: set to >= 300 bases for complete transcripts"/>
                        <param name="minChainQ" size="10" type="integer" value="500" label="Minimum chain size in dataset"/>
                        <param name="minChainT" size="10" type="integer" value="500" label="Minimum chain size in target"/>
                </when>
        </conditional>
        -->
    </inputs>
    
    <outputs>
        <data format="text" name="output" label="Output file">
        </data>
    </outputs>
    
    <tests>
        <test>
            <param name="input" value="test1.hg19.txt"/>
            <output name="output" file="test1.hg18.txt"/>
        </test>
    </tests>
    
    <help>
        CrossMap is versatile tool to convert genome coordinates or annotation files between genome
assemblies. It supports mostly commonly used file types, including BAM, BED,BigWig, GFF,
GTF, SAM, Wiggle, and VCF formats. For large plain text file types, such as BED, GFF, GTF
and VCF, reading from remote servers and file compression are supported.
    </help>
    
    <citations>
        <citation type="doi">10.1093/bioinformatics/btt730</citation>
    </citations>
</tool>
